import { Disposable } from "@lincode/promiselikes";
export default class Appendable extends Disposable {
    initOuterObject3d() {
        this.outerObject3d.userData.manager = this;
    }
    attach(object) {
        this.outerObject3d.attach(object.outerObject3d);
    }
    append(object) {
        this.outerObject3d.add(object.outerObject3d);
    }
    dispose() {
        var _a, _b;
        if (this.done)
            return this;
        super.dispose();
        (_a = this.outerObject3d.parent) === null || _a === void 0 ? void 0 : _a.remove(this.outerObject3d);
        for (const child of [...this.outerObject3d.children])
            (_b = child.userData.manager) === null || _b === void 0 ? void 0 : _b.dispose();
        return this;
    }
}
