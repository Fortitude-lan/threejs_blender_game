import { useMemo } from "react";
const log = console.log;
let cache = [];
export default (factory) => {
    return useMemo(() => {
        if (log === console.log) {
            queueMicrotask(() => cache = []);
            const result = factory();
            cache.push(result);
            return result;
        }
        return cache.shift();
    }, []);
};
